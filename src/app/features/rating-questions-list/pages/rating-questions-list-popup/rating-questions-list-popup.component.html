<div class="overlay">
  <div class="popup-container">
    <!-- Header -->
    <div class="popup-header">
      <h2 class="modal-title">
        <i class="fas fa-edit"></i>
        {{ isEditMode ? "Edit" : "Create" }} Rating Question
      </h2>
      <button class="close-btn" (click)="onClose()">âœ–</button>
    </div>

    <form [formGroup]="providerForm" (ngSubmit)="onSubmit()">
      <div class="form-section">
        <!-- Question -->
        <div class="form-row">
          <div class="form-group">
            <label>Question <span class="required">*</span></label>
            <textarea formControlName="Question" rows="3"></textarea>
             <div *ngIf="providerForm.get('Question')?.invalid && providerForm.get('Question')?.touched" class="error-message">
              Question is required.
            </div>
          </div>
        </div>

        <!-- Question Type & Rank -->
        <div class="form-row align-center">
          <div class="form-group">
            <label>Question Type <span class="required">*</span></label>
            <ng-select
              [items]="questionTypes"
              bindLabel="QuestionType"
              bindValue="RatingQuestionTypeId"
              formControlName="RatingQuestionTypeId"
              [clearable]="true"
              [searchable]="true"
              [closeOnSelect]="true"
            >
              <ng-template ng-option-tmp let-item="item">
                <div class="option-box">{{ item.QuestionType }}</div>
              </ng-template>
            </ng-select>
             <div *ngIf="providerForm.get('RatingQuestionTypeId')?.invalid && providerForm.get('RatingQuestionTypeId')?.touched" class="error-message">
              Question Type is required.
            </div>
          </div>

          <div class="form-group">
            <label>Rank <span class="required">*</span></label>
            <input type="number" formControlName="ListRank" />
            <div *ngIf="providerForm.get('ListRank')?.invalid && providerForm.get('ListRank')?.touched" class="error-message">
              Rank is required.
            </div>
          </div>
        </div>

        <!-- Active Toggle -->
        <div class="form-row">
          <div class="form-group is-active-group">
            <label class="toggle-label">Is Active?</label>
            <label class="toggle-switch">
              <input type="checkbox" formControlName="IsActive" />
              <span class="slider"></span>
            </label>
          </div>
        </div>

        <!-- Footer -->
        <div class="form-actions">
          <button type="button" class="btn cancel-btn" (click)="onClose()"> Cancel </button>
          <button type="submit" class="btn submit-btn" [disabled]="providerForm.invalid" >
            {{ isEditMode ? "Update" : "Save" }}
          </button>
        </div>
      </div>
    </form>
  </div>
</div>
